---
name: eapi-fabric

mgmt:
  network: 'mgmt-eapi-fabric'
  ipv4_subnet: 10.254.254.0/24

topology:
  kinds:
    ceos:
      image: arista/ceos:4.27.2F
  nodes:
    eapi-agg01:
      image: arista/ceos:4.27.2F
      mgmt_ipv4: 10.73.254.21
      kind: ceos
      startup-config: intended/configs/eapi-agg01.cfg
      ports:
        - 8021:443/tcp
      env:
        TMODE: lacp
    eapi-agg02:
      image: arista/ceos:4.27.2F
      mgmt_ipv4: 10.73.254.22
      kind: ceos
      startup-config: intended/configs/eapi-agg02.cfg
      ports:
        - 8022:443/tcp
      env:
        TMODE: lacp
    eapi-l2leaf01:
      image: arista/ceos:4.27.2F
      mgmt_ipv4: 10.73.254.31
      kind: ceos
      startup-config: intended/configs/eapi-l2leaf01.cfg
      ports:
        - 8029:443/tcp
      env:
        TMODE: lacp
    eapi-l2leaf02:
      image: arista/ceos:4.27.2F
      mgmt_ipv4: 10.73.254.32
      kind: ceos
      startup-config: intended/configs/eapi-l2leaf02.cfg
      ports:
        - 8030:443/tcp
      env:
        TMODE: lacp
    eapi-bl01a:
      image: arista/ceos:4.27.2F
      mgmt_ipv4: 10.73.254.15
      kind: ceos
      startup-config: intended/configs/eapi-bl01a.cfg
      ports:
        - 8015:443/tcp
      env:
        TMODE: lacp
    eapi-bl01b:
      image: arista/ceos:4.27.2F
      mgmt_ipv4: 10.73.254.16
      kind: ceos
      startup-config: intended/configs/eapi-bl01b.cfg
      ports:
        - 8016:443/tcp
      env:
        TMODE: lacp
    eapi-cl01a:
      image: arista/ceos:4.27.2F
      mgmt_ipv4: 10.73.254.19
      kind: ceos
      startup-config: intended/configs/eapi-cl01a.cfg
      ports:
        - 8027:443/tcp
      env:
        TMODE: lacp
    eapi-cl01b:
      image: arista/ceos:4.27.2F
      mgmt_ipv4: 10.73.254.20
      kind: ceos
      startup-config: intended/configs/eapi-cl01b.cfg
      ports:
        - 8028:443/tcp
      env:
        TMODE: lacp
    eapi-leaf1a:
      image: arista/ceos:4.27.2F
      mgmt_ipv4: 10.73.254.11
      kind: ceos
      startup-config: intended/configs/eapi-leaf1a.cfg
      ports:
        - 8011:443/tcp
      env:
        TMODE: lacp
    eapi-leaf1b:
      image: arista/ceos:4.27.2F
      mgmt_ipv4: 10.73.254.12
      kind: ceos
      startup-config: intended/configs/eapi-leaf1b.cfg
      ports:
        - 8012:443/tcp
      env:
        TMODE: lacp
    eapi-leaf2a:
      image: arista/ceos:4.27.2F
      mgmt_ipv4: 10.73.254.13
      kind: ceos
      startup-config: intended/configs/eapi-leaf2a.cfg
      ports:
        - 8013:443/tcp
      env:
        TMODE: lacp
    eapi-leaf2b:
      image: arista/ceos:4.27.2F
      mgmt_ipv4: 10.73.254.14
      kind: ceos
      startup-config: intended/configs/eapi-leaf2b.cfg
      ports:
        - 8014:443/tcp
      env:
        TMODE: lacp
    eapi-leaf3a:
      image: arista/ceos:4.27.2F
      mgmt_ipv4: 10.73.254.17
      kind: ceos
      startup-config: intended/configs/eapi-leaf3a.cfg
      ports:
        - 8017:443/tcp
      env:
        TMODE: lacp
    eapi-leaf4a:
      image: arista/ceos:4.27.2F
      mgmt_ipv4: 10.73.254.18
      kind: ceos
      startup-config: intended/configs/eapi-leaf4a.cfg
      ports:
        - 8018:443/tcp
      env:
        TMODE: lacp
    eapi-rs01:
      image: arista/ceos:4.27.2F
      mgmt_ipv4: 10.73.254.51
      kind: ceos
      startup-config: intended/configs/eapi-rs01.cfg
      ports:
        - 8033:443/tcp
      env:
        TMODE: lacp
    eapi-rs02:
      image: arista/ceos:4.27.2F
      mgmt_ipv4: 10.73.254.52
      kind: ceos
      startup-config: intended/configs/eapi-rs02.cfg
      ports:
        - 8034:443/tcp
      env:
        TMODE: lacp
    eapi-spine1:
      image: arista/ceos:4.27.2F
      mgmt_ipv4: 10.73.254.101
      kind: ceos
      startup-config: intended/configs/eapi-spine1.cfg
      ports:
        - 8001:443/tcp
      env:
        TMODE: lacp
    eapi-spine2:
      image: arista/ceos:4.27.2F
      mgmt_ipv4: 10.73.254.102
      kind: ceos
      startup-config: intended/configs/eapi-spine2.cfg
      ports:
        - 8002:443/tcp
      env:
        TMODE: lacp

  links:
    - endpoints: ["eapi-agg01:ethernet1", "eapi-leaf1a:ethernet5"]
    - endpoints: ["eapi-agg01:ethernet2", "eapi-leaf1b:ethernet5"]
    - endpoints: ["eapi-agg02:ethernet1", "eapi-leaf2a:ethernet5"]
    - endpoints: ["eapi-agg02:ethernet2", "eapi-leaf2b:ethernet5"]
    - endpoints: ["eapi-l2leaf01:ethernet1", "eapi-spine1:ethernet11"]
    - endpoints: ["eapi-l2leaf01:ethernet2", "eapi-spine2:ethernet11"]
    - endpoints: ["eapi-l2leaf01:eth3", "eapi-l2leaf02:eth3"]
    - endpoints: ["eapi-l2leaf01:eth4", "eapi-l2leaf02:eth4"]
    - endpoints: ["eapi-l2leaf02:ethernet1", "eapi-spine1:ethernet12"]
    - endpoints: ["eapi-l2leaf02:ethernet2", "eapi-spine2:ethernet12"]
    - endpoints: ["eapi-bl01a:ethernet1", "eapi-spine1:ethernet5"]
    - endpoints: ["eapi-bl01a:ethernet2", "eapi-spine2:ethernet5"]
    - endpoints: ["eapi-bl01a:eth3", "eapi-bl01b:eth3"]
    - endpoints: ["eapi-bl01a:eth4", "eapi-bl01b:eth4"]
    - endpoints: ["eapi-bl01b:ethernet1", "eapi-spine1:ethernet6"]
    - endpoints: ["eapi-bl01b:ethernet2", "eapi-spine2:ethernet6"]
    - endpoints: ["eapi-cl01a:ethernet1", "eapi-spine1:ethernet9"]
    - endpoints: ["eapi-cl01a:ethernet2", "eapi-spine2:ethernet9"]
    - endpoints: ["eapi-cl01a:eth3", "eapi-cl01b:eth3"]
    - endpoints: ["eapi-cl01a:eth4", "eapi-cl01b:eth4"]
    - endpoints: ["eapi-cl01b:ethernet1", "eapi-spine1:ethernet10"]
    - endpoints: ["eapi-cl01b:ethernet2", "eapi-spine2:ethernet10"]
    - endpoints: ["eapi-leaf1a:ethernet1", "eapi-spine1:ethernet1"]
    - endpoints: ["eapi-leaf1a:ethernet2", "eapi-spine2:ethernet1"]
    - endpoints: ["eapi-leaf1a:eth3", "eapi-leaf1b:eth3"]
    - endpoints: ["eapi-leaf1a:eth4", "eapi-leaf1b:eth4"]
    - endpoints: ["eapi-leaf1b:ethernet1", "eapi-spine1:ethernet2"]
    - endpoints: ["eapi-leaf1b:ethernet2", "eapi-spine2:ethernet2"]
    - endpoints: ["eapi-leaf2a:ethernet1", "eapi-spine1:ethernet3"]
    - endpoints: ["eapi-leaf2a:ethernet2", "eapi-spine2:ethernet3"]
    - endpoints: ["eapi-leaf2a:eth3", "eapi-leaf2b:eth3"]
    - endpoints: ["eapi-leaf2a:eth4", "eapi-leaf2b:eth4"]
    - endpoints: ["eapi-leaf2b:ethernet1", "eapi-spine1:ethernet4"]
    - endpoints: ["eapi-leaf2b:ethernet2", "eapi-spine2:ethernet4"]
    - endpoints: ["eapi-leaf3a:ethernet1", "eapi-spine1:ethernet7"]
    - endpoints: ["eapi-leaf3a:ethernet2", "eapi-spine2:ethernet7"]
    - endpoints: ["eapi-leaf3a:eth3", "eapi-leaf4a:eth3"]
    - endpoints: ["eapi-leaf3a:eth4", "eapi-leaf4a:eth4"]
    - endpoints: ["eapi-leaf4a:ethernet1", "eapi-spine1:ethernet8"]
    - endpoints: ["eapi-leaf4a:ethernet2", "eapi-spine2:ethernet8"]
    - endpoints: ["eapi-rs01:ethernet1", "eapi-spine1:ethernet13"]
    - endpoints: ["eapi-rs02:ethernet1", "eapi-spine2:ethernet13"]
