---
name: fabric

mgmt:
  network: 'mgmt-fabric'
  ipv4_subnet: 10.73.254.0/24

topology:
  kinds:
    ceos:
      image: arista/ceos:4.27.2F
  nodes:
    eapi-agg01:
      image: arista/ceos:4.27.2F
      mgmt_ipv4: 10.73.254.21
      kind: ceos
      startup-config: intended/configs/eapi-agg01.cfg
      ports:
        - 9021:443/tcp
      env:
        TMODE: lacp
    eapi-agg02:
      image: arista/ceos:4.27.2F
      mgmt_ipv4: 10.73.254.22
      kind: ceos
      startup-config: intended/configs/eapi-agg02.cfg
      ports:
        - 9022:443/tcp
      env:
        TMODE: lacp
    eapi-l2leaf01:
      image: arista/ceos:4.27.2F
      mgmt_ipv4: 10.73.254.31
      kind: ceos
      startup-config: intended/configs/eapi-l2leaf01.cfg
      ports:
        - 9029:443/tcp
      env:
        TMODE: lacp
    eapi-l2leaf02:
      image: arista/ceos:4.27.2F
      mgmt_ipv4: 10.73.254.32
      kind: ceos
      startup-config: intended/configs/eapi-l2leaf02.cfg
      ports:
        - 9030:443/tcp
      env:
        TMODE: lacp
    eapi-bl01a:
      image: arista/ceos:4.27.2F
      mgmt_ipv4: 10.73.254.15
      kind: ceos
      startup-config: intended/configs/eapi-bl01a.cfg
      ports:
        - 9015:443/tcp
      env:
        TMODE: lacp
    eapi-bl01b:
      image: arista/ceos:4.27.2F
      mgmt_ipv4: 10.73.254.16
      kind: ceos
      startup-config: intended/configs/eapi-bl01b.cfg
      ports:
        - 9016:443/tcp
      env:
        TMODE: lacp
    eapi-cl01a:
      image: arista/ceos:4.27.2F
      mgmt_ipv4: 10.73.254.19
      kind: ceos
      startup-config: intended/configs/eapi-cl01a.cfg
      ports:
        - 9027:443/tcp
      env:
        TMODE: lacp
    eapi-cl01b:
      image: arista/ceos:4.27.2F
      mgmt_ipv4: 10.73.254.20
      kind: ceos
      startup-config: intended/configs/eapi-cl01b.cfg
      ports:
        - 9028:443/tcp
      env:
        TMODE: lacp
    eapi-leaf1a:
      image: arista/ceos:4.27.2F
      mgmt_ipv4: 10.73.254.11
      kind: ceos
      startup-config: intended/configs/eapi-leaf1a.cfg
      ports:
        - 9011:443/tcp
      env:
        TMODE: lacp
    eapi-leaf1b:
      image: arista/ceos:4.27.2F
      mgmt_ipv4: 10.73.254.12
      kind: ceos
      startup-config: intended/configs/eapi-leaf1b.cfg
      ports:
        - 9012:443/tcp
      env:
        TMODE: lacp
    eapi-leaf2a:
      image: arista/ceos:4.27.2F
      mgmt_ipv4: 10.73.254.13
      kind: ceos
      startup-config: intended/configs/eapi-leaf2a.cfg
      ports:
        - 9013:443/tcp
      env:
        TMODE: lacp
    eapi-leaf2b:
      image: arista/ceos:4.27.2F
      mgmt_ipv4: 10.73.254.14
      kind: ceos
      startup-config: intended/configs/eapi-leaf2b.cfg
      ports:
        - 9014:443/tcp
      env:
        TMODE: lacp
    eapi-leaf3a:
      image: arista/ceos:4.27.2F
      mgmt_ipv4: 10.73.254.17
      kind: ceos
      startup-config: intended/configs/eapi-leaf3a.cfg
      ports:
        - 9017:443/tcp
      env:
        TMODE: lacp
    eapi-leaf4a:
      image: arista/ceos:4.27.2F
      mgmt_ipv4: 10.73.254.18
      kind: ceos
      startup-config: intended/configs/eapi-leaf4a.cfg
      ports:
        - 9018:443/tcp
      env:
        TMODE: lacp
    eapi-rs01:
      image: arista/ceos:4.27.2F
      mgmt_ipv4: 10.73.254.51
      kind: ceos
      startup-config: intended/configs/eapi-rs01.cfg
      ports:
        - 9033:443/tcp
      env:
        TMODE: lacp
    eapi-rs02:
      image: arista/ceos:4.27.2F
      mgmt_ipv4: 10.73.254.52
      kind: ceos
      startup-config: intended/configs/eapi-rs02.cfg
      ports:
        - 9034:443/tcp
      env:
        TMODE: lacp
    eapi-spine1:
      image: arista/ceos:4.27.2F
      mgmt_ipv4: 10.73.254.101
      kind: ceos
      startup-config: intended/configs/eapi-spine1.cfg
      ports:
        - 9001:443/tcp
      env:
        TMODE: lacp
    eapi-spine2:
      image: arista/ceos:4.27.2F
      mgmt_ipv4: 10.73.254.102
      kind: ceos
      startup-config: intended/configs/eapi-spine2.cfg
      ports:
        - 9002:443/tcp
      env:
        TMODE: lacp
    srv-pod01:
      env:
          TMODE: lacp
      image: arista/ceos:4.27.2F
      kind: ceos
      mgmt_ipv4: 10.73.254.41
      startup-config: intended/configs/srv-pod01.cfg
    srv-pod02:
      env:
          TMODE: lacp
      image: arista/ceos:4.27.2F
      kind: ceos
      mgmt_ipv4: 10.73.254.42
      startup-config: intended/configs/srv-pod02.cfg

  links:
    - endpoints: ["eapi-agg01:eth1", "eapi-leaf1a:eth5"]
    - endpoints: ["eapi-agg01:eth2", "eapi-leaf1b:eth5"]
    - endpoints: ["eapi-agg02:eth1", "eapi-leaf2a:eth5"]
    - endpoints: ["eapi-agg02:eth2", "eapi-leaf2b:eth5"]
    - endpoints: ["eapi-l2leaf01:eth1", "eapi-spine1:eth11"]
    - endpoints: ["eapi-l2leaf01:eth2", "eapi-spine2:eth11"]
    - endpoints: ["eapi-l2leaf01:eth7", "eapi-l2leaf02:eth7"]
    - endpoints: ["eapi-l2leaf01:eth8", "eapi-l2leaf02:eth8"]
    - endpoints: ["eapi-l2leaf02:eth1", "eapi-spine1:eth12"]
    - endpoints: ["eapi-l2leaf02:eth2", "eapi-spine2:eth12"]
    - endpoints: ["eapi-bl01a:eth1", "eapi-spine1:eth5"]
    - endpoints: ["eapi-bl01a:eth2", "eapi-spine2:eth5"]
    - endpoints: ["eapi-bl01a:eth7", "eapi-bl01b:eth7"]
    - endpoints: ["eapi-bl01a:eth8", "eapi-bl01b:eth8"]
    - endpoints: ["eapi-bl01b:eth1", "eapi-spine1:eth6"]
    - endpoints: ["eapi-bl01b:eth2", "eapi-spine2:eth6"]
    - endpoints: ["eapi-cl01a:eth1", "eapi-spine1:eth9"]
    - endpoints: ["eapi-cl01a:eth2", "eapi-spine2:eth9"]
    - endpoints: ["eapi-cl01a:eth7", "eapi-cl01b:eth7"]
    - endpoints: ["eapi-cl01a:eth8", "eapi-cl01b:eth8"]
    - endpoints: ["eapi-cl01b:eth1", "eapi-spine1:eth10"]
    - endpoints: ["eapi-cl01b:eth2", "eapi-spine2:eth10"]
    - endpoints: ["eapi-leaf1a:eth1", "eapi-spine1:eth1"]
    - endpoints: ["eapi-leaf1a:eth2", "eapi-spine2:eth1"]
    - endpoints: ["eapi-leaf1a:eth7", "eapi-leaf1b:eth7"]
    - endpoints: ["eapi-leaf1a:eth8", "eapi-leaf1b:eth8"]
    - endpoints: ["eapi-leaf1b:eth1", "eapi-spine1:eth2"]
    - endpoints: ["eapi-leaf1b:eth2", "eapi-spine2:eth2"]
    - endpoints: ["eapi-leaf2a:eth1", "eapi-spine1:eth3"]
    - endpoints: ["eapi-leaf2a:eth2", "eapi-spine2:eth3"]
    - endpoints: ["eapi-leaf2a:eth7", "eapi-leaf2b:eth7"]
    - endpoints: ["eapi-leaf2a:eth8", "eapi-leaf2b:eth8"]
    - endpoints: ["eapi-leaf2b:eth1", "eapi-spine1:eth4"]
    - endpoints: ["eapi-leaf2b:eth2", "eapi-spine2:eth4"]
    - endpoints: ["eapi-leaf3a:eth1", "eapi-spine1:eth7"]
    - endpoints: ["eapi-leaf3a:eth2", "eapi-spine2:eth7"]
    - endpoints: ["eapi-leaf3a:eth7", "eapi-leaf4a:eth7"]
    - endpoints: ["eapi-leaf3a:eth8", "eapi-leaf4a:eth8"]
    - endpoints: ["eapi-leaf4a:eth1", "eapi-spine1:eth8"]
    - endpoints: ["eapi-leaf4a:eth2", "eapi-spine2:eth8"]
    - endpoints: ["eapi-rs01:eth1", "eapi-spine1:eth13"]
    - endpoints: ["eapi-rs02:eth1", "eapi-spine2:eth13"]
    - endpoints: ['srv-pod01:eth1', 'eapi-agg01:eth3']
    - endpoints: ['srv-pod02:eth1', 'eapi-agg02:eth3']
